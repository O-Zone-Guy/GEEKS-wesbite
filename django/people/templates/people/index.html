{% extends 'base.html' %}
{% load static %}

{% block title %}{{ member.user.first_name }}'sProfile{% endblock %}

{% block head %}
<script src="https://cdn.jsdelivr.net/npm/davidshimjs-qrcodejs@0.0.2/qrcode.min.js"></script>
{% endblock %}

{% block body %}

<h3>{{ member.user.first_name }} {{ member.user.last_name }}</h3>

<p>Email: {{ member.user.email }}</p>



{% if user.is_staff %}
Account groups: {% for group in user.groups.all %} {{ group.name }} {% endfor %}
<br>
<a href="/admin/">Admin page</a>
{% endif %}

<br>
{% if member.is_member %}
Membership Number: {{ member.member_code }}
<div id="memQR"></div>
{% else %}
<button>Request Membership(WIP)</button>
<br>
Membership costs 10CAD. You will be contacted with instructions.
{% endif %}

{% if perms.people.make_member %}
<a href="{% url 'people:membership' %}">See membership applications</a>
{% endif %}
{% if perms.people.see_member %}
<br>
<a href="{% url 'people:members' %}">See members</a>
{% endif %}
<br>
<a href="{% url 'people:password' %}">Change Passowrd</a>
<br>
<a href="{% url 'people:logout' %}">Logout</a>

<script type="text/javascript">
 var qrcode = new QRCode(document.getElementById("memQR"), {
     text: "{{ member.member_code }}",
     width: 100,
     height: 100
 })
</script>
{% endblock %}
